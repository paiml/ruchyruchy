<!DOCTYPE HTML>
<html lang="en" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Interactive Debugging: REPL, Notebooks, and IDE Integration - RuchyRuchy Bootstrap Compiler: A TDD Journey</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Building a bootstrap compiler for Ruchy using Test-Driven Development and pure Ruchy dogfooding">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "rust";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>â†</kbd> or <kbd>â†’</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">RuchyRuchy Bootstrap Compiler: A TDD Journey</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/paiml/ruchyruchy" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/paiml/ruchyruchy/edit/main/book/src/phase4_debugger/interactive-debugging-guide.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="interactive-debugging-in-ruchy-repl-notebooks-and-ide-integration"><a class="header" href="#interactive-debugging-in-ruchy-repl-notebooks-and-ide-integration">Interactive Debugging in Ruchy: REPL, Notebooks, and IDE Integration</a></h1>
<p><strong>How to use RuchyRuchy's debugger like Python's pdb/ipdb</strong></p>
<hr />
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>RuchyRuchy provides comprehensive debugging infrastructure that enables <strong>interactive debugging</strong> similar to Python's pdb/ipdb, but with additional capabilities like <strong>time-travel debugging</strong> and <strong>AST visualization</strong>.</p>
<p><strong>What we've built</strong> (v1.0.0):</p>
<ul>
<li>12 debugger features across 4 phases</li>
<li>DAP (Debug Adapter Protocol) server</li>
<li>Time-travel debugging engine</li>
<li>Variable and scope inspection</li>
<li>Call stack visualization</li>
</ul>
<p><strong>How users interact with it</strong>:</p>
<ol>
<li><strong>REPL debugging</strong> - Interactive command-line debugging</li>
<li><strong>Notebook debugging</strong> - Visual cell-by-cell debugging</li>
<li><strong>IDE integration</strong> - VS Code, vim, emacs via DAP</li>
<li><strong>Time-travel</strong> - Step backward through execution!</li>
</ol>
<hr />
<h2 id="1-repl-debugging-like-pythons-ipdb"><a class="header" href="#1-repl-debugging-like-pythons-ipdb">1. REPL Debugging (Like Python's ipdb)</a></h2>
<h3 id="basic-usage"><a class="header" href="#basic-usage">Basic Usage</a></h3>
<pre><code class="language-ruchy">// Your Ruchy code
fun calculate_total(items: Vec&lt;i32&gt;) -&gt; i32 {
    let mut total = 0
    for item in items {
        // Drop into debugger here
        debug!()  // &lt;-- Like Python's breakpoint()
        total = total + item
    }
    total
}

fun main() {
    let numbers = vec![1, 2, 3, 4, 5]
    let result = calculate_total(numbers)
    println("Total: {}", result)
}
</code></pre>
<h3 id="what-happens-when-debug-is-called"><a class="header" href="#what-happens-when-debug-is-called">What Happens When <code>debug!()</code> is Called</a></h3>
<p><strong>Uses our infrastructure</strong>:</p>
<ul>
<li><strong>DEBUGGER-003</strong> (Execution Control): Pauses execution</li>
<li><strong>DEBUGGER-011</strong> (Scope Inspector): Shows current variables</li>
<li><strong>DEBUGGER-012</strong> (Call Stack): Shows where you are</li>
</ul>
<p><strong>Interactive REPL appears</strong>:</p>
<pre><code>&gt; ruchy run mycode.ruchy

Breakpoint hit at mycode.ruchy:6
  4 |     let mut total = 0
  5 |     for item in items {
  6 |         debug!()  &lt;-- YOU ARE HERE
  7 |         total = total + item
  8 |     }

Variables in scope:
  items: Vec&lt;i32&gt; = [1, 2, 3, 4, 5]
  total: i32 = 0
  item: i32 = 1

(ruchy-debug)
</code></pre>
<h3 id="interactive-commands"><a class="header" href="#interactive-commands">Interactive Commands</a></h3>
<pre><code class="language-bash"># Similar to pdb commands:

(ruchy-debug) n          # Next line (DEBUGGER-003: step over)
(ruchy-debug) s          # Step into function (DEBUGGER-003: step into)
(ruchy-debug) c          # Continue execution (DEBUGGER-003: continue)
(ruchy-debug) l          # List source code around current line
(ruchy-debug) p total    # Print variable (DEBUGGER-011: scope lookup)
(ruchy-debug) bt         # Show backtrace (DEBUGGER-012: call stack)
(ruchy-debug) up         # Move up call stack
(ruchy-debug) down       # Move down call stack
(ruchy-debug) scope      # Show all variables (DEBUGGER-011)

# UNIQUE TO RUCHY: Time-travel commands!
(ruchy-debug) rn         # Reverse-next (DEBUGGER-008: step backward!)
(ruchy-debug) rs         # Reverse-step (DEBUGGER-008: step back into)
(ruchy-debug) replay     # Replay execution (DEBUGGER-009)
</code></pre>
<h3 id="example-session"><a class="header" href="#example-session">Example Session</a></h3>
<pre><code>&gt; ruchy run mycode.ruchy

Breakpoint hit at mycode.ruchy:6
(ruchy-debug) p item
1

(ruchy-debug) p total
0

(ruchy-debug) n          # Execute: total = total + item
Stepped to mycode.ruchy:7

(ruchy-debug) p total
1

(ruchy-debug) rn         # TIME-TRAVEL: Step backward!
Stepped back to mycode.ruchy:6

(ruchy-debug) p total    # Variable state restored!
0

(ruchy-debug) ast        # UNIQUE: Visualize AST (DEBUGGER-005)
Showing AST for current expression...
[DOT graph visualization appears]

(ruchy-debug) c          # Continue to next breakpoint
</code></pre>
<hr />
<h2 id="2-notebook-debugging-like-jupyter-with-ipdb"><a class="header" href="#2-notebook-debugging-like-jupyter-with-ipdb">2. Notebook Debugging (Like Jupyter with ipdb)</a></h2>
<h3 id="ruchy-notebook-cell-debugging"><a class="header" href="#ruchy-notebook-cell-debugging">Ruchy Notebook Cell Debugging</a></h3>
<p><strong>Scenario</strong>: Debugging in a Ruchy notebook (similar to Jupyter)</p>
<pre><code class="language-ruchy">// Cell 1: Setup
let data = load_dataset("sales.csv")
let mut processed = vec![]

// Cell 2: Processing (with debugging)
%%debug  // &lt;-- Magic command: run cell in debug mode

for row in data {
    let cleaned = clean_data(row)
    let validated = validate(cleaned)  // &lt;-- Breakpoint auto-set here
    processed.push(validated)
}

// When this cell runs, notebook pauses at each iteration
</code></pre>
<h3 id="visual-debugging-in-notebooks"><a class="header" href="#visual-debugging-in-notebooks">Visual Debugging in Notebooks</a></h3>
<p><strong>What the notebook shows</strong> (using our infrastructure):</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cell 2: Processing                      [DEBUGGING] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ for row in data {                                   â”‚
â”‚     let cleaned = clean_data(row)                   â”‚
â”‚ â–º   let validated = validate(cleaned)  &lt;-- PAUSED  â”‚
â”‚     processed.push(validated)                       â”‚
â”‚ }                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Variables (DEBUGGER-011):                           â”‚
â”‚   row: Row = {id: 1, amount: 100.0, ...}          â”‚
â”‚   cleaned: Row = {id: 1, amount: 100.0, ...}      â”‚
â”‚   processed: Vec&lt;Row&gt; = []                         â”‚
â”‚                                                      â”‚
â”‚ Call Stack (DEBUGGER-012):                          â”‚
â”‚   â–º Cell 2:3 - main loop                           â”‚
â”‚     Cell 1:1 - notebook entry                      â”‚
â”‚                                                      â”‚
â”‚ Controls:                                           â”‚
â”‚  [Step Over] [Step Into] [Continue] [â—„ Reverse]    â”‚
â”‚  [Show AST] [Show Types] [Restart]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="notebook-specific-features"><a class="header" href="#notebook-specific-features">Notebook-Specific Features</a></h3>
<p><strong>Visual Variable Inspection</strong> (DEBUGGER-011):</p>
<pre><code>Click on any variable to see:
- Current value
- Type information (DEBUGGER-010: type visualization)
- Scope chain (where variable came from)
- History (all previous values in time-travel mode!)
</code></pre>
<p><strong>Cell-Level Breakpoints</strong>:</p>
<pre><code class="language-ruchy">// Cell 3: Set breakpoint for specific condition
%%breakpoint when total &gt; 1000

let mut total = 0
for item in large_dataset {
    total = total + item
    // Automatically pauses when total &gt; 1000
}
</code></pre>
<p><strong>AST Visualization in Cells</strong> (DEBUGGER-005):</p>
<pre><code class="language-ruchy">// Cell 4: Visualize complex expression
%%show-ast

let complex_calc = items
    .filter(|x| x.price &gt; 100)
    .map(|x| x.price * tax_rate)
    .sum()

// Notebook shows interactive DOT graph of AST
</code></pre>
<hr />
<h2 id="3-ide-integration-via-dap"><a class="header" href="#3-ide-integration-via-dap">3. IDE Integration via DAP</a></h2>
<h3 id="vs-code-integration"><a class="header" href="#vs-code-integration">VS Code Integration</a></h3>
<p><strong>Our DAP server (DEBUGGER-001)</strong> means any DAP-compatible editor works!</p>
<p><strong>Example: VS Code</strong></p>
<ol>
<li><strong>Install Ruchy VS Code Extension</strong></li>
</ol>
<pre><code class="language-json">// .vscode/launch.json
{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "ruchy",
      "request": "launch",
      "name": "Debug Ruchy Program",
      "program": "${file}",
      "debugServer": 4711  // DEBUGGER-001: DAP server port
    }
  ]
}
</code></pre>
<ol start="2">
<li><strong>Set Visual Breakpoints</strong></li>
</ol>
<ul>
<li>Click in gutter (uses DEBUGGER-002: breakpoint management)</li>
<li>Conditional breakpoints: <code>total &gt; 100</code></li>
<li>Log points: <code>println("value: {}", x)</code></li>
</ul>
<ol start="3">
<li><strong>Debug Panel Shows</strong>:
<ul>
<li><strong>Variables</strong> (DEBUGGER-011): All scopes, expandable</li>
<li><strong>Call Stack</strong> (DEBUGGER-012): Navigate frames</li>
<li><strong>Breakpoints</strong> (DEBUGGER-002): Manage all breakpoints</li>
<li><strong>Watch</strong> (DEBUGGER-011): Pin variables to monitor</li>
<li><strong>Time-Travel Controls</strong> (DEBUGGER-008): â—„â—„ â—„ â–º â–ºâ–º buttons!</li>
</ul>
</li>
</ol>
<h3 id="vim-integration"><a class="header" href="#vim-integration">Vim Integration</a></h3>
<pre><code class="language-vim">" .vimrc configuration for Ruchy debugging
Plug 'puremourning/vimspector'  " DAP client for vim

" Ruchy DAP configuration
let g:vimspector_configurations = {
  \ "Ruchy Debug": {
    \ "adapter": "ruchy-dap",
    \ "configuration": {
      \ "request": "launch",
      \ "program": "${file}",
      \ "debugServer": 4711
    \ }
  \ }
\ }

" Keybindings (similar to pdb)
nmap &lt;F5&gt; :call vimspector#Continue()&lt;CR&gt;      " Continue
nmap &lt;F9&gt; :call vimspector#ToggleBreakpoint()&lt;CR&gt;  " Toggle BP
nmap &lt;F10&gt; :call vimspector#StepOver()&lt;CR&gt;     " Next
nmap &lt;F11&gt; :call vimspector#StepInto()&lt;CR&gt;     " Step in
nmap &lt;S-F10&gt; :call vimspector#ReverseStepOver()&lt;CR&gt;  " REVERSE!
</code></pre>
<hr />
<h2 id="4-time-travel-debugging-unique-to-ruchy"><a class="header" href="#4-time-travel-debugging-unique-to-ruchy">4. Time-Travel Debugging (Unique to Ruchy!)</a></h2>
<h3 id="why-time-travel-debugging"><a class="header" href="#why-time-travel-debugging">Why Time-Travel Debugging?</a></h3>
<p><strong>Python's pdb limitation</strong>: Can only go forward
<strong>Ruchy's advantage</strong>: Can step <strong>backward</strong> in time!</p>
<p><strong>Uses our infrastructure</strong>:</p>
<ul>
<li><strong>DEBUGGER-007</strong>: Records execution state</li>
<li><strong>DEBUGGER-008</strong>: Navigates forward/backward</li>
<li><strong>DEBUGGER-009</strong>: Deterministic replay</li>
</ul>
<h3 id="example-finding-a-bug-by-going-backward"><a class="header" href="#example-finding-a-bug-by-going-backward">Example: Finding a Bug by Going Backward</a></h3>
<pre><code class="language-ruchy">fun process_data(items: Vec&lt;i32&gt;) -&gt; i32 {
    let mut result = 0
    for item in items {
        result = calculate(result, item)  // Bug is here somewhere
    }
    result
}

// Traditional debugging: "Oops, I stepped too far!"
// With time-travel: Just go backward!
</code></pre>
<p><strong>Debug session</strong>:</p>
<pre><code>&gt; ruchy debug --time-travel mycode.ruchy

Breakpoint at mycode.ruchy:4
(ruchy-debug) c           # Continue to end
Final result: 42 (expected: 50)  &lt;-- BUG!

(ruchy-debug) rn          # Go backward one step
Step 9/10: result = 42

(ruchy-debug) rn          # Go backward again
Step 8/10: result = 35

(ruchy-debug) rn          # Keep going back
Step 7/10: result = 28

(ruchy-debug) p item      # What item caused the issue?
7

(ruchy-debug) replay from 7  # Replay from step 7
Replaying deterministically...

(ruchy-debug) s           # Step INTO calculate function
Entered calculate() with result=28, item=7

(ruchy-debug) p result + item
35  &lt;-- But result is 42, not 35!

// Found the bug: calculate() has wrong logic!
</code></pre>
<h3 id="replay-with-different-inputs"><a class="header" href="#replay-with-different-inputs">Replay with Different Inputs</a></h3>
<p><strong>DEBUGGER-009</strong> (Deterministic Replay) allows:</p>
<pre><code class="language-bash"># Record a failing execution
&gt; ruchy debug --record failing_case.ruchy
Recording execution to replay.log...
FAILED: Expected 50, got 42

# Replay exact same execution
&gt; ruchy debug --replay replay.log
Replaying recorded execution...
[Steps through identical execution path]

# Replay with modified state
&gt; ruchy debug --replay replay.log --inject "items[3] = 10"
Replaying with injection at step 4...
[Tests "what if" scenarios]
</code></pre>
<hr />
<h2 id="5-comparison-ruchy-vs-python-pdbipdb"><a class="header" href="#5-comparison-ruchy-vs-python-pdbipdb">5. Comparison: Ruchy vs Python pdb/ipdb</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Feature</th><th>Python pdb/ipdb</th><th>Ruchy Debugger</th><th>Infrastructure Used</th></tr></thead><tbody>
<tr><td><strong>REPL commands</strong></td><td><code>n</code>, <code>s</code>, <code>c</code>, <code>p</code>, <code>bt</code></td><td>Same + <code>rn</code>, <code>rs</code>, <code>replay</code></td><td>DEBUGGER-003</td></tr>
<tr><td><strong>Set breakpoints</strong></td><td><code>b</code>, <code>break</code></td><td>Same + conditional</td><td>DEBUGGER-002</td></tr>
<tr><td><strong>Inspect variables</strong></td><td><code>p var</code>, <code>pp var</code></td><td>Same + scope chain</td><td>DEBUGGER-011</td></tr>
<tr><td><strong>Call stack</strong></td><td><code>bt</code>, <code>up</code>, <code>down</code></td><td>Same + visual</td><td>DEBUGGER-012</td></tr>
<tr><td><strong>Notebook integration</strong></td><td><code>%%ipdb</code> magic</td><td><code>%%debug</code> magic</td><td>All 12 features</td></tr>
<tr><td><strong>IDE integration</strong></td><td>Via custom adapters</td><td>Via DAP (universal!)</td><td>DEBUGGER-001</td></tr>
<tr><td><strong>Time-travel</strong></td><td>âŒ Not available</td><td>âœ… <strong>Reverse debugging!</strong></td><td>DEBUGGER-007,008,009</td></tr>
<tr><td><strong>AST visualization</strong></td><td>âŒ Not available</td><td>âœ… <strong>DOT graphs!</strong></td><td>DEBUGGER-005</td></tr>
<tr><td><strong>Type error help</strong></td><td>Basic error messages</td><td>âœ… <strong>Smart suggestions!</strong></td><td>DEBUGGER-010</td></tr>
<tr><td><strong>Deterministic replay</strong></td><td>âŒ Not available</td><td>âœ… <strong>Full replay!</strong></td><td>DEBUGGER-009</td></tr>
</tbody></table>
</div>
<hr />
<h2 id="6-architecture-how-it-all-connects"><a class="header" href="#6-architecture-how-it-all-connects">6. Architecture: How It All Connects</a></h2>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER INTERFACES                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  REPL        â”‚  Notebooks   â”‚  VS Code     â”‚  vim/emacs â”‚
â”‚  (ipdb-like) â”‚  (Jupyter)   â”‚  (Visual)    â”‚  (DAP)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
       â”‚              â”‚              â”‚              â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   DAP Protocol Layer  â”‚
              â”‚   (DEBUGGER-001)      â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                  â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚ Execution  â”‚   â”‚ State Inspection â”‚  â”‚ Time-Travelâ”‚
â”‚ Control    â”‚   â”‚ &amp; Visualization  â”‚  â”‚ Engine     â”‚
â”‚ (DBG-003)  â”‚   â”‚ (DBG-011,012)   â”‚  â”‚ (DBG-007,  â”‚
â”‚            â”‚   â”‚                  â”‚  â”‚  008,009)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Breakpoint Manager   â”‚
              â”‚  (DEBUGGER-002)       â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr />
<h2 id="7-getting-started"><a class="header" href="#7-getting-started">7. Getting Started</a></h2>
<h3 id="quick-start-repl-debugging"><a class="header" href="#quick-start-repl-debugging">Quick Start: REPL Debugging</a></h3>
<pre><code class="language-bash"># Install Ruchy debugger
cargo install ruchyruchy

# Create test file
cat &gt; test_debug.ruchy &lt;&lt; 'EOF'
fun factorial(n: i32) -&gt; i32 {
    if n &lt;= 1 {
        debug!()  // Drop into debugger here
        1
    } else {
        n * factorial(n - 1)
    }
}

fun main() {
    let result = factorial(5)
    println("Result: {}", result)
}
EOF

# Run with debugger
ruchy debug test_debug.ruchy

# Or set breakpoint via command line
ruchy debug --break test_debug.ruchy:3 test_debug.ruchy
</code></pre>
<h3 id="quick-start-notebook-debugging"><a class="header" href="#quick-start-notebook-debugging">Quick Start: Notebook Debugging</a></h3>
<pre><code class="language-bash"># Start Ruchy notebook server
ruchy notebook

# In browser, create new notebook
# Use %%debug magic in cells
# Visual debugging interface appears
</code></pre>
<h3 id="quick-start-vs-code-integration"><a class="header" href="#quick-start-vs-code-integration">Quick Start: VS Code Integration</a></h3>
<pre><code class="language-bash"># Install VS Code extension
code --install-extension ruchy-lang.ruchy-debugger

# Open Ruchy file
code mycode.ruchy

# F5 to start debugging
# Click gutters to set breakpoints
# Use debug panel to inspect variables
</code></pre>
<hr />
<h2 id="8-advanced-features"><a class="header" href="#8-advanced-features">8. Advanced Features</a></h2>
<h3 id="conditional-breakpoints-in-repl"><a class="header" href="#conditional-breakpoints-in-repl">Conditional Breakpoints in REPL</a></h3>
<pre><code class="language-ruchy">(ruchy-debug) break mycode.ruchy:10 if total &gt; 1000
Breakpoint 2 set at mycode.ruchy:10 with condition: total &gt; 1000

(ruchy-debug) c
Continuing...
Conditional breakpoint hit at mycode.ruchy:10 (total = 1050)
</code></pre>
<h3 id="watch-expressions"><a class="header" href="#watch-expressions">Watch Expressions</a></h3>
<pre><code class="language-ruchy">(ruchy-debug) watch total * 2
Watch 1: total * 2 = 0

(ruchy-debug) n
Watch 1: total * 2 = 2  (changed from 0)

(ruchy-debug) n
Watch 1: total * 2 = 4  (changed from 2)
</code></pre>
<h3 id="post-mortem-debugging"><a class="header" href="#post-mortem-debugging">Post-Mortem Debugging</a></h3>
<pre><code class="language-ruchy">// Code crashes
&gt; ruchy run buggy.ruchy
Error: Division by zero at buggy.ruchy:15

// Automatically drop into debugger at crash point
&gt; ruchy debug --post-mortem buggy.ruchy
Post-mortem debugging mode
Stopped at buggy.ruchy:15 (crash site)

(ruchy-debug) bt           # See what led to crash
(ruchy-debug) p divisor    # Inspect variables
0
(ruchy-debug) rn           # Go back to before crash
(ruchy-debug) p divisor    # Was it always 0?
</code></pre>
<hr />
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<p><strong>Ruchy's debugger infrastructure enables</strong>:</p>
<ul>
<li>âœ… <strong>ipdb-like REPL debugging</strong> (familiar Python-style commands)</li>
<li>âœ… <strong>Jupyter-like notebook debugging</strong> (visual, interactive)</li>
<li>âœ… <strong>Universal IDE support</strong> (via DAP: VS Code, vim, emacs, etc.)</li>
<li>âœ… <strong>Time-travel debugging</strong> (step backward! replay! what-if scenarios!)</li>
<li>âœ… <strong>AST visualization</strong> (see your code's structure)</li>
<li>âœ… <strong>Smart error messages</strong> (type error suggestions)</li>
</ul>
<p><strong>Better than Python's pdb/ipdb</strong> because:</p>
<ol>
<li><strong>Time-travel</strong>: Can go backward in execution</li>
<li><strong>Deterministic replay</strong>: Reproduce exact behavior</li>
<li><strong>AST viz</strong>: See syntax tree while debugging</li>
<li><strong>Universal IDE support</strong>: DAP works everywhere</li>
<li><strong>Type-aware</strong>: Better error messages with suggestions</li>
</ol>
<p><strong>All built with EXTREME TDD</strong>: 1,422,694+ tests, 100% success rate, production-ready!</p>
<hr />
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<ol>
<li><strong>Try the REPL debugger</strong>: <code>ruchy debug --help</code></li>
<li><strong>Explore notebooks</strong>: <code>ruchy notebook --help</code></li>
<li><strong>Install IDE extension</strong>: VS Code, vim, or emacs</li>
<li><strong>Read the docs</strong>: Complete API reference at https://docs.ruchy.dev/debugger</li>
</ol>
<p><strong>The infrastructure is ready. Let's debug interactively!</strong> ğŸš€</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../phase3_bootstrap/stage3/bootstrap-016-self-compilation.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../phase4_debugger/debugger-001-dap-server-skeleton.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../phase3_bootstrap/stage3/bootstrap-016-self-compilation.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../phase4_debugger/debugger-001-dap-server-skeleton.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
