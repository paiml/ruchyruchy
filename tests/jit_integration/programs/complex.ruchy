// JIT Integration Test: Complex Program
// Tests: Multiple features combined (real-world scenario)

fun fibonacci(n) {
    if n <= 1 {
        return n;
    }
    return fibonacci(n - 1) + fibonacci(n - 2);
}

fun sum_array(arr, len) {
    let total = 0;
    for i in 0..len {
        total = total + arr[i];
    }
    return total;
}

fun main() {
    // Fibonacci sequence
    let fib5 = fibonacci(5);  // 5
    let fib6 = fibonacci(6);  // 8

    // Array operations
    let numbers = [10, 20, 30, 40, 50];
    let array_sum = sum_array(numbers, 5);  // 150

    // Control flow with arrays
    let result = 0;
    let i = 0;
    while i < 3 {
        result = result + numbers[i];
        i = i + 1;
    }

    // Combine all results
    let final_result = fib5 + fib6 + array_sum + result;

    return final_result;  // Expected: 5 + 8 + 150 + 60 = 223
}
